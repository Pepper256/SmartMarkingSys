# 自动批改作业程序

## 基本介绍：

用户指定试卷和答案，并上传学生试卷，系统需要自动根据试卷答案批改学生试卷，
且在每一个错题前要生成学生的错因。在批改完成以后，系统需要生成错题报告，
指出高频错题和易错点整理，同时该报告需要可以打印

## 项目依赖：

最低java版本：java17
   
   1. org.junit.jupiter junit-jupiter 5.10.2
   2. org.apache.pdfbox pdfbox 2.0.35
   3. com.fasterxml.jackson.core jackson-databind 2.15.2
   4. com.alibaba fastjson 1.2.83
   5. org.apache.httpcomponents httpclient 4.5.13
   6. com.vladsch.flexmark flexmark-all 0.64.8
   7. com.openhtmltopdf openhtmltopdf-core 1.0.10
   8. com.openhtmltopdf openhtmltopdf-pdfbox 1.0.10
   9. org.jsoup jsoup 1.15.4

   详情见pom.xml

## 数据库（SQLite）

本项目使用 **SQLite** 作为本地数据库，默认数据库文件为：

- `./database/smartmark.db`

建表脚本位于：

- `src/main/resources/database/schema.sql`


## 用户需求：
1. 作为老师，我需要提供需要批改的试卷和答案，这样我可以指定该试卷进行批改
2. 作为老师，我需要上传学生试卷，这样我可以让系统对学生试卷进行批改
3. 作为老师，我需要让系统自动批改试卷，这样我可以不用手动批改试卷
4. 作为老师，我需要让系统对每一个学生试卷生成错因，这样我可以对学生学习错误进行反馈和针对教育
5. 作为老师，我需要让系统对学生试卷生成错题报告，这样我可以直观看到这次考试的总体情况
6. 作为老师，我需要让报告打印出来（提取PDF），这样我可以将该报告打印并分享给其他老师

## 用例：
1. 用户上传试卷和答案

   (1) 用户选定试卷和答案PDF文件

   (2) 系统保存试卷和答案信息

   (3) 系统提示上传完成


2. 用户上传学生试卷

   (1) 用户上传需要批改的学生试卷

   (2) 系统保存需要批改的学生试卷

   (3) 系统提示成功


3. 系统自动批改试卷

    条件：用户已经上传需要批改的试卷，学生试卷和答案

    (1) 用户点击批改按钮，开始批改

    (2) 系统自动批改试卷并生成错因，完成以后显示批改完成

    (3) 系统显示首个已经批改完成的学生试卷

4. 系统生成学生考试报告

    条件：学生试卷已经批改完成

   (1) 用户点击学生批改完成的试卷，点击生成报告按钮

   (2) 系统生成报告并展示报告

5. 系统生成考试报告

    条件：学生试卷已经批改完成

   (1) 用户点击生成报告按钮

   (2) 系统生成报告并展示报告

6. 报告导出

    条件：报告已经生成

   (1) 用户点击打印按钮

   (2) 用户指定保存路径

   (3) 系统生成报告的pdf文件，并保存到指定的路径

## 补充说明

   1. 使用该程序请在src/main/resources目录下创建qwen.api.key字段，其值为
阿里巴巴百炼大模型服务平台的apikey
   2. resources目录下提供test.pdf用于测试需求
   3. 该程序使用dots.ocr作为ocr服务，请在本地启动dots.ocr的vllm后端，详见docs/OCR.md
   4. 该项目虽然提供了view目录但是无UI
